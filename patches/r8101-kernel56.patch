# Patch credits: Sauerland
# Link: https://build.opensuse.org/package/show/home:Sauerland/r8101

--- a/src/r8101_n.c	2019-12-30 13:44:16.000000000 +0100
+++ b/src/r8101_n.c	2020-04-04 09:08:42.065067776 +0200
@@ -254,7 +254,11 @@
 static void rtl8101_hw_config(struct net_device *dev);
 static int rtl8101_close(struct net_device *dev);
 static void rtl8101_set_rx_mode(struct net_device *dev);
+#if LINUX_VERSION_CODE < KERNEL_VERSION(5,6,0)
 static void rtl8101_tx_timeout(struct net_device *dev);
+#else
+static void rtl8101_tx_timeout(struct net_device *dev, unsigned int txqueue);
+#endif
 static struct net_device_stats *rtl8101_get_stats(struct net_device *dev);
 static int rtl8101_rx_interrupt(struct net_device *, struct rtl8101_private *, napi_budget);
 static int rtl8101_change_mtu(struct net_device *dev, int new_mtu);
@@ -1282,12 +1286,21 @@
         return single_open(file, show, dev);
 }
 
+#if LINUX_VERSION_CODE < KERNEL_VERSION(5,6,0)
 static const struct file_operations rtl8101_proc_fops = {
         .open           = rtl8101_proc_open,
         .read           = seq_read,
         .llseek         = seq_lseek,
         .release        = single_release,
 };
+#else
+static const struct proc_ops rtl8101_proc_fops = {
+         .proc_open           = rtl8101_proc_open,
+         .proc_read           = seq_read,
+         .proc_lseek         = seq_lseek,
+         .proc_release        = single_release,
+};
+#endif
 #endif
 
 /*
@@ -12695,7 +12708,11 @@
 }
 
 static void
+#if LINUX_VERSION_CODE < KERNEL_VERSION(5,6,0)
 rtl8101_tx_timeout(struct net_device *dev)
+#else
+rtl8101_tx_timeout(struct net_device *dev, unsigned int txqueue)
+#endif
 {
         struct rtl8101_private *tp = netdev_priv(dev);
         unsigned long flags;

